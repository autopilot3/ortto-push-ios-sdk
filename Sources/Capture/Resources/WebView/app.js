"use strict";(()=>{var Gr=Object.create;var T=Object.defineProperty;var Rr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Fr=Object.getPrototypeOf,Lr=Object.prototype.hasOwnProperty;var t=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Mr=(e,r,i,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Vr(r))!Lr.call(e,o)&&o!==i&&T(e,o,{get:()=>r[o],enumerable:!(n=Rr(r,o))||n.enumerable});return e};var Hr=(e,r,i)=>(i=e!=null?Gr(Fr(e)):{},Mr(r||!e||!e.__esModule?T(i,"default",{value:e,enumerable:!0}):i,e));var j=t((Fi,P)=>{"use strict";var zr=/./;P.exports=zr});var C=t((Li,W)=>{"use strict";var Dr=typeof Object.defineProperty=="function"?Object.defineProperty:null;W.exports=Dr});var k=t((Mi,N)=>{"use strict";var Ur=C();function Xr(){try{return Ur({},"x",{}),!0}catch{return!1}}N.exports=Xr});var G=t((Hi,B)=>{"use strict";var Ir=Object.defineProperty;B.exports=Ir});var M=t((zi,L)=>{"use strict";var u=Object.prototype,R=u.toString,V=u.__defineGetter__,F=u.__defineSetter__,Jr=u.__lookupGetter__,Kr=u.__lookupSetter__;function Qr(e,r,i){var n,o,s,a;if(typeof e!="object"||e===null||R.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof i!="object"||i===null||R.call(i)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+i+"`.");if(o="value"in i,o&&(Jr.call(e,r)||Kr.call(e,r)?(n=e.__proto__,e.__proto__=u,delete e[r],e[r]=i.value,e.__proto__=n):e[r]=i.value),s="get"in i,a="set"in i,o&&(s||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return s&&V&&V.call(e,r,i.get),a&&F&&F.call(e,r,i.set),e}L.exports=Qr});var z=t((Di,H)=>{"use strict";var Yr=k(),Zr=G(),$r=M(),y;Yr()?y=Zr:y=$r;H.exports=y});var U=t((Ui,D)=>{"use strict";var et=z();function rt(e,r,i){et(e,r,{configurable:!1,enumerable:!1,writable:!1,value:i})}D.exports=rt});var l=t((Xi,X)=>{"use strict";var tt=U();X.exports=tt});var g=t((Ii,I)=>{"use strict";function it(e){return typeof e=="boolean"}I.exports=it});var K=t((Ji,J)=>{"use strict";function nt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}J.exports=nt});var Y=t((Ki,Q)=>{"use strict";var ot=K();Q.exports=ot});var $=t((Qi,Z)=>{"use strict";var st=Y(),at=st();function ut(){return at&&typeof Symbol.toStringTag=="symbol"}Z.exports=ut});var w=t((Yi,ee)=>{"use strict";var ct=$();ee.exports=ct});var m=t((Zi,re)=>{"use strict";var lt=Object.prototype.toString;re.exports=lt});var ie=t(($i,te)=>{"use strict";var pt=m();function ft(e){return pt.call(e)}te.exports=ft});var oe=t((en,ne)=>{"use strict";var dt=Object.prototype.hasOwnProperty;function vt(e,r){return e==null?!1:dt.call(e,r)}ne.exports=vt});var h=t((rn,se)=>{"use strict";var yt=oe();se.exports=yt});var ue=t((tn,ae)=>{"use strict";var gt=typeof Symbol=="function"?Symbol.toStringTag:"";ae.exports=gt});var le=t((nn,ce)=>{"use strict";var wt=h(),p=ue(),b=m();function mt(e){var r,i,n;if(e==null)return b.call(e);i=e[p],r=wt(e,p);try{e[p]=void 0}catch{return b.call(e)}return n=b.call(e),r?e[p]=i:delete e[p],n}ce.exports=mt});var d=t((on,pe)=>{"use strict";var ht=w(),bt=ie(),qt=le(),q;ht()?q=qt:q=bt;pe.exports=q});var de=t((sn,fe)=>{"use strict";var xt=Boolean.prototype.toString;fe.exports=xt});var ye=t((an,ve)=>{"use strict";var St=de();function _t(e){try{return St.call(e),!0}catch{return!1}}ve.exports=_t});var x=t((un,ge)=>{"use strict";var Ot=w(),At=d(),Et=ye(),Tt=Ot();function Pt(e){return typeof e=="object"?e instanceof Boolean?!0:Tt?Et(e):At(e)==="[object Boolean]":!1}ge.exports=Pt});var me=t((cn,we)=>{"use strict";var jt=g(),Wt=x();function Ct(e){return jt(e)||Wt(e)}we.exports=Ct});var qe=t((ln,be)=>{"use strict";var he=l(),S=me(),Nt=g(),kt=x();he(S,"isPrimitive",Nt);he(S,"isObject",kt);be.exports=S});var Se=t((pn,xe)=>{"use strict";function Bt(){return new Function("return this;")()}xe.exports=Bt});var Oe=t((fn,_e)=>{"use strict";var Gt=typeof self=="object"?self:null;_e.exports=Gt});var Ee=t((dn,Ae)=>{"use strict";var Rt=typeof window=="object"?window:null;Ae.exports=Rt});var Pe=t((vn,Te)=>{"use strict";var Vt=typeof global=="object"?global:null;Te.exports=Vt});var ke=t((yn,Ne)=>{"use strict";var Ft=qe().isPrimitive,Lt=Se(),je=Oe(),We=Ee(),Ce=Pe();function Mt(e){if(arguments.length){if(!Ft(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return Lt()}if(je)return je;if(We)return We;if(Ce)return Ce;throw new Error("unexpected error. Unable to resolve global object.")}Ne.exports=Mt});var Ge=t((gn,Be)=>{"use strict";var Ht=ke();Be.exports=Ht});var Fe=t((wn,Ve)=>{"use strict";var zt=Ge(),Re=zt(),Dt=Re.document&&Re.document.childNodes;Ve.exports=Dt});var Me=t((mn,Le)=>{"use strict";var Ut=Int8Array;Le.exports=Ut});var ze=t((hn,He)=>{"use strict";var Xt=j(),It=Fe(),Jt=Me();function Kt(){return typeof Xt=="function"||typeof Jt=="object"||typeof It=="function"}He.exports=Kt});var _=t((bn,De)=>{"use strict";function Qt(){return/^\s*function\s*([^(]*)/i}De.exports=Qt});var Xe=t((qn,Ue)=>{"use strict";var Yt=_(),Zt=Yt();Ue.exports=Zt});var Ke=t((xn,Je)=>{"use strict";var $t=l(),Ie=_(),ei=Xe();$t(Ie,"REGEXP",ei);Je.exports=Ie});var Ye=t((Sn,Qe)=>{"use strict";var ri=d(),O;function ti(e){return ri(e)==="[object Array]"}Array.isArray?O=Array.isArray:O=ti;Qe.exports=O});var $e=t((_n,Ze)=>{"use strict";var ii=Ye();Ze.exports=ii});var rr=t((On,er)=>{"use strict";var ni=$e();function oi(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return r;function r(i){var n,o;if(!ni(i)||(n=i.length,n===0))return!1;for(o=0;o<n;o++)if(e(i[o])===!1)return!1;return!0}}er.exports=oi});var ir=t((An,tr)=>{"use strict";var si=rr();tr.exports=si});var or=t((En,nr)=>{"use strict";function ai(e){return e!==null&&typeof e=="object"}nr.exports=ai});var ar=t((Tn,sr)=>{"use strict";var ui=l(),ci=ir(),A=or();ui(A,"isObjectLikeArray",ci(A));sr.exports=A});var cr=t((Pn,ur)=>{"use strict";var li=ar();function pi(e){return li(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}ur.exports=pi});var pr=t((jn,lr)=>{"use strict";var fi=cr();lr.exports=fi});var dr=t((Wn,fr)=>{"use strict";var di=d(),vi=Ke().REGEXP,yi=pr();function gi(e){var r,i,n;if(i=di(e).slice(8,-1),(i==="Object"||i==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(r=vi.exec(n.toString()),r)return r[1]}return yi(e)?"Buffer":i}fr.exports=gi});var E=t((Cn,vr)=>{"use strict";var wi=dr();vr.exports=wi});var gr=t((Nn,yr)=>{"use strict";var mi=E();function hi(e){var r;return e===null?"null":(r=typeof e,r==="object"?mi(e).toLowerCase():r)}yr.exports=hi});var mr=t((kn,wr)=>{"use strict";var bi=E();function qi(e){return bi(e).toLowerCase()}wr.exports=qi});var br=t((Bn,hr)=>{"use strict";var xi=ze(),Si=gr(),_i=mr(),Oi=xi()?_i:Si;hr.exports=Oi});var xr=t((Gn,qr)=>{"use strict";var Ai=br();function Ei(e){return Ai(e)==="function"}qr.exports=Ei});var _r=t((Rn,Sr)=>{"use strict";var Ti=xr();Sr.exports=Ti});var Ar=t((Vn,Or)=>{"use strict";function Pi(e){return e}Or.exports=Pi});var Tr=t((Fn,Er)=>{"use strict";var ji=Ar();Er.exports=ji});var Wr=t((Ln,jr)=>{"use strict";var Pr=_r(),Wi=l(),Ci=Tr(),Ni=h();function ki(e,r){var i,n;if(!Pr(e))throw new TypeError("invalid argument. First argument must be a function. Value: `"+e+"`.");if(arguments.length<2)i=Ci;else if(i=r,!Pr(i))throw new TypeError("invalid argument. Hash function argument must be a function. Value: `"+i+"`.");return n={},Wi(o,"cache",n),o;function o(){var s,a,f,c;for(s=new Array(arguments.length),c=0;c<arguments.length;c++)s[c]=arguments[c];return f=i(s).toString(),Ni(n,f)?n[f]:(a=e.apply(null,s),n[f]=a,a)}}jr.exports=ki});var Nr=t((Mn,Cr)=>{"use strict";var Bi=Wr();Cr.exports=Bi});var kr=Hr(Nr()),v=class{loaded=!1;config=void 0;setConfig=r=>{this.config=r};getConfig=()=>this.config;hasConfig=()=>this.config!=null;runWidget=r=>{window.ap3c.widgetsFuncs[r.type].inject(r),window.ap3c._generalWidget.show(r)};sendMessageToNative=r=>{try{window.Android?window.Android.showMessage(JSON.stringify(r)):window.webkit?.messageHandlers?.messageHandler!=null?window.webkit.messageHandlers.messageHandler.postMessage(r):console.log("Native code interface is not available")}catch(i){console.log("Error sending message to native code: "+i)}};initWindow=()=>{window.ap3c=window.ap3c||{},window.ap3c.cmd=window.ap3c.cmd||[]};initAp3c=()=>{window.ap3c.activity=function(n){window.ap3c.act=window.ap3c.act||[],window.ap3c.act.push(n)};let r=document.createElement("script"),i=new URL("capture.js",this.config?.endpoint);r.type="text/javascript",r.src=i.toString(),r.async=!0,r.defer=!0,document.body.appendChild(r)};pushAp3cCommands=(...r)=>{window.ap3c.cmd.push(...r)};shimAp3c=()=>{window.ap3c.getWidgetsData=(0,kr.default)(()=>{let n=this.config?.data;return n.widgets=n.widgets.filter(o=>o.type==="popup").map(o=>({...o,trigger:{...o.trigger,selection:"load"},when:{...o.when,selection:"load"}})),JSON.stringify(n)});let r=window.ap3c._generalWidget.hide;window.ap3c._generalWidget.hide=(n,o)=>{r(n,o),window.ap3cWebView.sendMessageToNative({type:"widget-close",id:n.id})};let i=window.ap3c.track;window.ap3c.track=(n,o)=>{i(n,o),window.ap3cWebView.sendMessageToNative({type:"ap3c-track",payload:n})},window.ap3c._generalWidget.canExecute=()=>!0};start=()=>{if(!this.config)throw new Error("No config provided");let{token:r,data:i,endpoint:n}=this.config;this.initWindow(),this.pushAp3cCommands(this.shimAp3c,()=>window.ap3c.init(r,n),()=>this.runWidget(i.widgets[0]),()=>{console.log("Ap3c loaded"),this.loaded=!0}),this.initAp3c()}};var Br=window.ap3cWebView=new v;Br.hasConfig()&&Br.start();})();
